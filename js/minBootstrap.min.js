class MinBoostrap{initnavbar(){document.querySelectorAll(".navbar-toggler").forEach((e=>{e.addEventListener("click",(t=>this.toggleCollapse(e.dataset.target)))}))}toggleCollapse(e){document.querySelectorAll(e).forEach((e=>{if(e.classList.contains("opened")){function t(){e.classList.contains("opened")&&e.classList.remove("opened"),e.removeEventListener("animationend",t),e.removeEventListener("webkitAnimationEnd",t)}this.slideUpElement(e),e.addEventListener("animationend",t),e.addEventListener("webkitAnimationEnd",t)}else e.classList.add("opened"),this.slideDownElement(e)}))}initCollapse(){document.querySelectorAll("a,.btn").forEach((e=>{"collapse"==e.dataset.toggle&&e.addEventListener("click",(t=>this.toggleCollapse(e.dataset.target)))}))}initAnimateSlideStyle(){let e=document.createElement("style");e.id="mb-slide-elm",document.querySelectorAll("head").forEach((t=>{t.append(e)}))}slideDownElement(e){document.querySelectorAll("#mb-slide-elm").forEach((t=>{t.innerHTML=`\n            @keyframes slide-elm-down {\n                from{\n                    max-height: 0px;   \n                }\n                to{\n                    max-height: ${e.offsetHeight}px;\n                }\n            }\n            `})),e.setAttribute("style","animation: slide-elm-down .3s ease;will-change:height;"),e.addEventListener("animationend",(()=>{e.removeAttribute("style")}))}slideUpElement(e){document.querySelectorAll("#mb-slide-elm").forEach((t=>{t.innerHTML=`\n            @keyframes slide-elm-up {\n                from{\n                    max-height: ${e.offsetHeight}px;\n                }\n                to{\n                    max-height: 0px;\n                }\n            }\n            `})),e.setAttribute("style","animation: slide-elm-up .3s ease;"),e.addEventListener("animationend",(()=>{e.removeAttribute("style")}))}initmodal(){document.querySelectorAll(".btn,.close,.modal").forEach((e=>{e.classList.contains("modal")&&e.addEventListener("click",(t=>{t.target==e&&this.closeModal()})),"modal"==e.dataset.toggle&&e.addEventListener("click",(t=>this.openModal(e.dataset.target))),"modal"==e.dataset.dismiss&&e.addEventListener("click",this.closeModal)}))}openModal(e){document.querySelectorAll(e).forEach((e=>{e.classList.add("showing"),document.body.classList.add("modal-open"),document.addEventListener("keyup",this.closeModalEsc)}))}closeModalEsc(e){"Escape"==e.key&&this.closeModal()}closeModal(){document.querySelectorAll(".modal").forEach((e=>{e.classList.contains("showing")&&(e.classList.add("goingout"),document.removeEventListener("keyup",this.closeModalEsc),e.addEventListener("animationend",(()=>{e.classList.contains("goingout")&&(e.classList.remove("goingout"),e.classList.remove("showing"),document.body.classList.remove("modal-open"))})))}))}initpopup(){document.querySelectorAll(".btn,a").forEach((e=>{"popup"==e.dataset.toggle&&e.addEventListener("click",(t=>this.openPopup(e,e.dataset.target)))}))}openPopup(e,t){this.closePopup(),document.querySelectorAll(t).forEach((t=>{t.classList.contains("showing")||(t.classList.add("showing"),t.classList.contains("dash-right")?t.setAttribute("style",`left: ${e.offsetLeft+e.offsetWidth}px;top: ${e.offsetTop}px`):t.setAttribute("style",`right: ${document.body.offsetWidth-e.offsetLeft-e.offsetWidth}px;top: ${e.offsetTop+e.offsetHeight+10}px`),t.addEventListener("animationend",this.addPopDismiss))}))}addPopDismiss(){document.addEventListener("click",this.closePopupTrigger),document.querySelectorAll(".popup").forEach((e=>{this.removePopupListener(e)}))}removePopupListener(e){e.removeEventListener("animationend",this.addPopDismiss)}closePopupTrigger(e){document.querySelectorAll(".popup").forEach((t=>{e.target!=t&&Array().forEach.call(t.children,(o=>{e.target!=o&&t.classList.contains("showing")&&this.closePopup()}))}))}closePopup(){document.querySelectorAll(".popup").forEach((e=>{e.classList.contains("showing")&&(e.classList.add("goingout"),document.removeEventListener("click",this.closePopupTrigger),e.addEventListener("animationend",(()=>{e.classList.contains("goingout")&&(e.classList.remove("goingout"),e.classList.remove("showing"))})))}))}}window.onload=()=>{let e=new MinBoostrap;e.initnavbar(),e.initmodal(),e.initpopup(),e.initAnimateSlideStyle(),e.initCollapse()};export default MinBoostrap;
